{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AccueilComponent = class AccueilComponent {\n  constructor(foodtruckService, router) {\n    this.foodtruckService = foodtruckService;\n    this.router = router;\n    this.foodtrucks = [];\n    this.selectedFoodtruck = null;\n    this.isDateValid = true;\n    this.reservationDate = null;\n    this.reservationForm = false;\n    this.dateText = 'Veuillez sélectionner une date dans le futur.';\n    this.response = null;\n  }\n  ngOnInit() {\n    this.loadFoodtrucks();\n  }\n  loadFoodtrucks() {\n    this.foodtruckService.getAllFoodtrucks().subscribe({\n      next: foodtrucks => {\n        this.foodtrucks = foodtrucks;\n      },\n      error: error => {\n        console.error('Error loading foodtrucks:', error);\n      }\n    });\n  }\n  checkDate(value) {\n    const selectedDate = new Date(value);\n    const today = new Date();\n    this.isDateValid = selectedDate > today;\n  }\n  onSubmit() {\n    if (!this.isDateValid) {\n      alert('Veuillez sélectionner une date dans le futur.');\n      return;\n    } else {\n      const formData = new FormData();\n      formData.append('date', this.reservationDate);\n      formData.append('foodtruck', this.selectedFoodtruck);\n      this.foodtruckService.addReservation(formData).subscribe({\n        next: response => {\n          this.response = response;\n        },\n        error: error => {\n          this.response = \"ERROR: \" + error;\n        }\n      });\n    }\n  }\n};\nAccueilComponent = __decorate([Component({\n  selector: 'app-accueil',\n  templateUrl: './accueil.component.html',\n  styleUrls: ['./accueil.component.css']\n})], AccueilComponent);\nexport { AccueilComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAU1C,IAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAU3BC,YAAoBC,gBAAkC,EAASC,MAAc;IAAzD,qBAAgB,GAAhBD,gBAAgB;IAA2B,WAAM,GAANC,MAAM;IARrE,eAAU,GAAQ,EAAE;IACpB,sBAAiB,GAAK,IAAI;IAC1B,gBAAW,GAAY,IAAI;IAC3B,oBAAe,GAAK,IAAI;IACxB,oBAAe,GAAS,KAAK;IAC7B,aAAQ,GAAK,+CAA+C;IAC5D,aAAQ,GAAK,IAAI;EAEgE;EAEjFC,QAAQ;IACN,IAAI,CAACC,cAAc,EAAE;EACvB;EAEAA,cAAc;IACZ,IAAI,CAACH,gBAAgB,CAACI,gBAAgB,EAAE,CAACC,SAAS,CAAC;MACjDC,IAAI,EAAGC,UAAU,IAAI;QACnB,IAAI,CAACA,UAAU,GAAGA,UAAU;MAC9B,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACfC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;KAED,CAAC;EACJ;EAEAE,SAAS,CAACC,KAAa;IACrB,MAAMC,YAAY,GAAG,IAAIC,IAAI,CAACF,KAAK,CAAC;IACpC,MAAMG,KAAK,GAAG,IAAID,IAAI,EAAE;IACxB,IAAI,CAACE,WAAW,GAAGH,YAAY,GAAGE,KAAK;EACzC;EAEAE,QAAQ;IACN,IAAI,CAAC,IAAI,CAACD,WAAW,EAAE;MACrBE,KAAK,CAAC,+CAA+C,CAAC;MACtD;KACD,MACG;MACF,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACC,eAAe,CAAC;MAC7CH,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAE,IAAI,CAACE,iBAAiB,CAAC;MACpD,IAAI,CAACtB,gBAAgB,CAACuB,cAAc,CAACL,QAAQ,CAAC,CAACb,SAAS,CAAC;QACvDC,IAAI,EAAGkB,QAAQ,IAAI;UACjB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;QAC1B,CAAC;QACDhB,KAAK,EAAGA,KAAK,IAAI;UACf,IAAI,CAACgB,QAAQ,GAAG,SAAS,GAAChB,KAAK;QACjC;OAED,CAAC;;EAEN;CAED;AAvDYV,gBAAgB,eAL5BD,SAAS,CAAC;EACT4B,QAAQ,EAAE,aAAa;EACvBC,WAAW,EAAE,0BAA0B;EACvCC,SAAS,EAAE,CAAC,yBAAyB;CACtC,CAAC,GACW7B,gBAAgB,CAuD5B;SAvDYA,gBAAgB","names":["Component","AccueilComponent","constructor","foodtruckService","router","ngOnInit","loadFoodtrucks","getAllFoodtrucks","subscribe","next","foodtrucks","error","console","checkDate","value","selectedDate","Date","today","isDateValid","onSubmit","alert","formData","FormData","append","reservationDate","selectedFoodtruck","addReservation","response","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["D:\\xampp\\htdocs\\umake\\Hooly\\Hooly_front\\src\\app\\accueil\\accueil.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FoodtruckService } from '../services/foodtruck/foodtruck.service';\nimport { tap } from 'rxjs/operators';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-accueil',\n  templateUrl: './accueil.component.html',\n  styleUrls: ['./accueil.component.css']\n})\nexport class AccueilComponent implements OnInit {\n\n  foodtrucks: any = [];\n  selectedFoodtruck:any=null;\n  isDateValid: boolean = true;\n  reservationDate:any=null;\n  reservationForm:boolean=false;\n  dateText:any='Veuillez sélectionner une date dans le futur.'\n  response:any=null;\n\n  constructor(private foodtruckService: FoodtruckService,private router: Router) { }\n\n  ngOnInit(): void {\n    this.loadFoodtrucks();\n  }\n\n  loadFoodtrucks(): void {\n    this.foodtruckService.getAllFoodtrucks().subscribe({\n      next: (foodtrucks) => {\n        this.foodtrucks = foodtrucks;\n      },\n      error: (error) => {\n        console.error('Error loading foodtrucks:', error);\n      },\n      \n    });\n  }\n\n  checkDate(value: string): void {\n    const selectedDate = new Date(value);\n    const today = new Date();\n    this.isDateValid = selectedDate > today;\n  }\n\n  onSubmit(): void {\n    if (!this.isDateValid) {\n      alert('Veuillez sélectionner une date dans le futur.');\n      return;\n    }\n    else{\n      const formData = new FormData();\n      formData.append('date', this.reservationDate);\n      formData.append('foodtruck', this.selectedFoodtruck);\n      this.foodtruckService.addReservation(formData).subscribe({\n        next: (response) => {\n          this.response = response;\n        },\n        error: (error) => {\n          this.response = \"ERROR: \"+error;\n        },\n        \n      });\n    }\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}